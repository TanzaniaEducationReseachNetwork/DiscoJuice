<div class="bs-docs-section">
	<div class="page-header">
		<h1 id="deploy-embedded">Embedded DiscoJuice</h1>
	</div>
	<p class="lead">If your application has a login-button, this button can be connected to the Embedded DiscoJuice Discovery Service.</p>



	<p>By installing DiscoJuice, the login button will result in a DiscoJuice popup discovery service that allows the user to select Identity Provider, and then redirects the user in the correct way.</p>

	<p>Prepare to add some HTML template of the pages where you would connect DiscoJuice to the login button. You probably will have a login link or button similar to this:</p>

<pre>
&lt;a href="/login" class="login-btn">Login&lt;/a>
</pre>

		<p>Next, in the <code>&lt;head&gt;</code>-section of your HTML page you will need to setup DiscoJuice.</p>

<pre>
&lt;!-- JQuery hosted by Google --&gt;
&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript">&lt;/script>

&lt;!-- DiscoJuice hosted by UNINETT at discojuice.org --&gt;
&lt;script type="text/javascript" src="https://cdn.discojuice.org/discojuice-stable.min.js">&lt;/script>
&lt;link rel="stylesheet" type="text/css" href="https://cdn.discojuice.org/css/discojuice.css" />
&lt;script type="text/javascript"&gt;
	DiscoJuice.Hosted.setup(
		{
			"target": "a.signin",
			"title": "{{title}}",{{#if enabled.disco}}
			"spentityid": "{{ep_entityid}}",
			"responseurl": "{{ep_response}}",{{/if}}
			"redirectURL": "{{ep_redirect}}",
			"feeds": {{feedsT}}
		}
	);
&lt;/script&gt;
</pre>

	<p>Notice that if you already have jQuery referenced on your site, DiscoJuice may reuse this jQuery, and you should not refer jQuery twice. DiscoJuice does not require any specific version of jQuery.</p>


	<p>The <code>DiscoJuice.Hosted.setup()</code> function takes a configuration object as a parameter. <a href="../getting-started/#deploy-embedded">Documentation on configuration object</a></p>

{{#if enabled.disco}}
	<p>The two properties <code>spentityid</code> and <code>responseurl</code> is required in order to enable the central IdP Discovery protocol that allows users of the </p>
{{/if}}



	<div class="bs-callout bs-callout-warning" id="callout-less-compilation">
		<h4>Protected pages without a login button</h4>
		<p>If your application includes pages that would require immediate redirect to the identity provider, there is no login button to connect to DiscoJuice. Instead you can combine these protected pages to any of the standalone DiscoJuice discovery options:
		</p>

		<ul>
			<li><a href="#deploy-sp">Service Provider IdP Discovery Service</a></li>
			<li><a href="#deploy-global">Global IdP Discovery Service</a></li>
		</ul>

		<p>Both these options may be selected in the selection on the top of this page for further details.</p>

	</div>

{{#if enabled.disco}}
	<h2 id="settingup-responsepage">Setting up the IdP Discovery Response HTML page</h2>

	<p>There is a static HTML page that you need to setup on your own host, and you need to configure the URL of this page. You have currently configured this URL:</p>

	<pre>{{ep_response}}</pre>



	<p>The <em>IdP Discovery Response page</em> is a simple HTML page that you should install on your service provider. You can <a href="https://raw.github.com/andreassolberg/DiscoJuice/master/discojuice/discojuiceDiscoveryResponse.html">download this file here</a>.</p>

	<p>The URL to this response page is required in the configuration above. It must be hosted on your own server, to fulfil the same-origin policy.</p>




	<h3>Beeing a trusted client</h3>

	<p>DiscoJuice.org hosts a <em>passice central discovery service</em>, and to get this to work, your hostname needs to be trusted by DiscoJuice.org. If your metadata cotains a <code>DiscoveryResponse</code> element, and is present in eduGAIN, InCommon, Kalmar or UK Access Federation, it should be trusted already. If you want to add additional hosts without joining these federations, ask on the <a href="{{ page.base_url }}community/">DiscoJuice mailinglist</a>.</p>
{{/if}}


</div>
